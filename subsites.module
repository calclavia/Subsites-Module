<?php

@require_once (drupal_get_path('module', 'subsites') . '/subsites.class.inc');
@require_once (drupal_get_path('module', 'subsites') . '/subsites.helpers.inc');
@require_once (drupal_get_path('module', 'subsites') . '/subsites.blockvis.inc');

/**
 * Implements hook_permission().
 */
function subsites_permission()
{
	return array(
		'administer subsites' => array('title' => t('Administer subsites'), ),
		'assign content to subsites' => array('title' => t('Assign content to subsites'), ),
	);
}

/**
 * Implements hook_menu().
 */
function subsites_menu()
{
	$items = array();

	$items['subsites/add-node'] = array(
		'page callback' => 'subsites_add_node',
		'access arguments' => array('administer subsites'),
		'type' => MENU_CALLBACK,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites'] = array(
		'title' => 'Subsites',
		'description' => 'Configure and manage your subsite settings.',
		'page callback' => 'drupal_get_form',
		'page arguments' => array('subsites_admin_display_form'),
		'access arguments' => array('administer subsites'),
		'file' => 'subsites.admin.inc',
	);
	
	$items['admin/structure/subsites/list'] = array(
		'title' => 'List subsites',
		'type' => MENU_DEFAULT_LOCAL_TASK,
		'weight' => -10,
	);
	$items['admin/structure/subsites/add'] = array(
		'title' => 'Add subsite',
		'page callback' => 'drupal_get_form',
		'page arguments' => array('subsites_info_form'),
		'access arguments' => array('administer subsites'),
		'type' => MENU_LOCAL_TASK,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites'] = array(
		'title' => 'Edit',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_info_form',
			3
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_NORMAL_ITEM,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites/info'] = array(
		'title' => 'Info',
		'type' => MENU_DEFAULT_LOCAL_TASK,
		'weight' => -10,
	);
	$items['admin/structure/subsites/%subsites/content'] = array(
		'title' => 'Content',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_content_nodes_form',
			3
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_LOCAL_TASK,
		'weight' => -9,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites/content/nodes'] = array(
		'title' => 'Nodes',
		'type' => MENU_DEFAULT_LOCAL_TASK,
		'weight' => -10,
	);
	$items['admin/structure/subsites/content/delete/%subsites/%node'] = array(
		'title' => 'Remove node from subsite',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_content_nodes_delete_confirm_form',
			5,
			6
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_CALLBACK,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites/content/pages'] = array(
		'title' => 'Pages',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_content_pages_form',
			3
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_LOCAL_TASK,
		'weight' => -9,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites/content/menu'] = array(
		'title' => 'Menu',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_content_menu_form',
			3
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_LOCAL_TASK,
		'weight' => -8,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/%subsites/look'] = array(
		'title' => 'Look and feel',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_look_form',
			3
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_LOCAL_TASK,
		'weight' => -8,
		'file' => 'subsites.admin.inc',
	);
	$items['admin/structure/subsites/delete/%subsites'] = array(
		'title' => 'Delete subsite',
		'page callback' => 'drupal_get_form',
		'page arguments' => array(
			'subsites_delete_confirm_form',
			4
		),
		'access arguments' => array('administer subsites'),
		'type' => MENU_CALLBACK,
		'weight' => 3,
		'file' => 'subsites.admin.inc',
	);

	return $items;
}
